# 🚀 部署检查清单 - travel-admin-backend-v2

## ✅ 当前配置状态

### 服务配置
- ✅ 服务名称: `travel-admin-backend-v2`
- ✅ 端口: `3000`
- ✅ 仓库地址: `869891093/travel-admin-backend`
- ✅ 仓库分支: `main`
- ✅ 部署类型: 容器型服务
- ✅ 公网访问: 已开启

### 环境变量
- ✅ `NODE_ENV=production`
- ✅ `PORT=3000`

## 🔍 部署后检查步骤

### 1. 检查服务状态
部署完成后，在微信云开发控制台检查：
- 服务状态是否为"运行中"
- 实例数量是否正常
- 日志是否有错误信息

### 2. 测试访问地址
获得的服务地址格式：
```
https://travel-admin-backend-v2.weixin.qq.com
```

### 3. 测试API接口
访问以下地址测试服务是否正常：

**健康检查：**
```
https://travel-admin-backend-v2.weixin.qq.com/api/health
```

**测试接口：**
```
https://travel-admin-backend-v2.weixin.qq.com/api/test
```

### 4. 测试管理后台
访问：
```
https://travel-admin-backend-v2.weixin.qq.com/
```

## 🛠️ 可能需要调整的配置

### 1. 更新前端API地址
如果您的管理后台需要调用这个代理服务，需要更新API地址：

**在 `js/config.js` 中更新：**
```javascript
const API_BASE_URL = 'https://travel-admin-backend-v2.weixin.qq.com';
```

### 2. 检查CORS配置
确保前端可以正常访问API：

**在 `server.js` 中已配置：**
```javascript
app.use(cors());
```

### 3. 环境变量检查
确保以下环境变量正确设置：
- `NODE_ENV=production`
- `PORT=3000`

## 📊 监控和日志

### 查看服务日志
在微信云开发控制台：
1. 进入云托管服务
2. 选择 `travel-admin-backend-v2` 服务
3. 查看"日志"标签页

### 监控指标
关注以下指标：
- CPU使用率
- 内存使用率
- 请求响应时间
- 错误率

## 🔄 自动部署配置

### GitHub Actions触发
每次推送到main分支都会自动触发重新部署：
```bash
./deploy-git.sh
```

### 部署流程
1. 代码推送到GitHub
2. 微信云开发自动检测到更新
3. 自动重新构建和部署
4. 服务保持可用状态

## 🚨 故障排除

### 常见问题

1. **服务启动失败**
   - 检查Dockerfile配置
   - 查看构建日志
   - 确认端口配置正确

2. **API调用失败**
   - 检查CORS配置
   - 确认API地址正确
   - 查看网络连接

3. **环境变量问题**
   - 确认环境变量已正确设置
   - 检查变量名和值

### 调试命令
```bash
# 查看服务状态
curl https://travel-admin-backend-v2.weixin.qq.com/api/health

# 测试API
curl https://travel-admin-backend-v2.weixin.qq.com/api/test
```

## 🎯 成功标志

部署成功的标志：
- ✅ 服务状态为"运行中"
- ✅ 健康检查接口返回正常
- ✅ 管理后台可以正常访问
- ✅ API调用无错误
- ✅ 自动部署功能正常

---

**🎉 恭喜！您的服务已成功部署为 `travel-admin-backend-v2`** 