# 🔍 微信云开发服务状态检查

## 📋 检查步骤

### 1. 访问微信云开发控制台
- 地址: https://cloud.weixin.qq.com/
- 选择环境: `new-travel-2gy6d6oy7ee5fb0e`
- 进入"云托管"服务

### 2. 检查服务状态
在云托管页面中查找 `travel-admin-backend-v2` 服务：

**正常状态应该显示：**
- ✅ 服务状态: "运行中"
- ✅ 实例数量: 1个或更多
- ✅ 最近部署: 显示时间戳

**异常状态可能显示：**
- ❌ 服务状态: "部署中" 或 "启动失败"
- ❌ 实例数量: 0
- ❌ 最近部署: 显示错误信息

### 3. 查看服务日志
点击服务名称进入详情页面：
- 查看"日志"标签页
- 检查是否有错误信息
- 查看"构建日志"和"运行日志"

### 4. 检查配置
在服务详情页面检查：
- 端口配置是否为3000
- 环境变量是否正确设置
- Dockerfile配置是否正确

## 🚨 常见问题及解决方案

### 问题1: 服务状态为"部署中"
**解决方案：**
- 等待5-10分钟让部署完成
- 如果超过10分钟仍显示"部署中"，点击"重新部署"

### 问题2: 服务状态为"启动失败"
**解决方案：**
1. 查看构建日志，找到具体错误
2. 检查Dockerfile语法
3. 确认package.json中的依赖正确
4. 重新部署服务

### 问题3: 端口配置错误
**解决方案：**
- 确认端口设置为3000
- 检查server.js中监听的端口
- 确认环境变量PORT=3000

### 问题4: 环境变量缺失
**解决方案：**
确保设置了以下环境变量：
```
NODE_ENV=production
PORT=3000
```

## 🔧 手动修复步骤

### 如果服务启动失败：

1. **检查Dockerfile**
   ```dockerfile
   FROM node:12-alpine
   WORKDIR /app
   COPY package*.json ./
   RUN npm install --production
   COPY . .
   EXPOSE 3000
   CMD ["npm", "start"]
   ```

2. **检查package.json**
   ```json
   {
     "scripts": {
       "start": "node server.js"
     },
     "dependencies": {
       "express": "^4.17.1",
       "cors": "^2.8.5",
       "node-fetch": "^2.6.1"
     }
   }
   ```

3. **检查server.js端口**
   ```javascript
   const port = process.env.PORT || 3000;
   app.listen(port, () => {
     console.log(`服务器运行在端口 ${port}`);
   });
   ```

## 📞 获取帮助

如果问题仍然存在，请提供：
1. 服务状态截图
2. 构建日志内容
3. 运行日志内容
4. 具体的错误信息

这样我可以帮您进一步诊断问题。 