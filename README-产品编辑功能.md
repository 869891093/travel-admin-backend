# 产品编辑功能说明

## 概述

网页端的产品编辑功能已经更新，现在与小程序版本的后台管理功能完全一致。新增了以下功能模块：

## 新增功能

### 1. 基本信息
- 产品名称（必填）
- 产品描述（必填）
- 成人基础价格（必填）
- 儿童基础价格
- 所属区域（必填）
- 产品标签管理

### 2. 标签管理
- 支持添加多个产品标签
- 可以删除已添加的标签
- 标签输入支持回车键快速添加
- 标签以彩色标签形式显示

### 3. 主图管理
- 支持多个主图URL（用逗号分隔）
- 兼容旧版本的封面图片URL字段
- 图片URL支持批量输入

### 4. 详情图片管理
- 支持多个详情图片URL（用逗号分隔）
- 用于产品详情页面的图片展示

### 5. 行程安排管理
- 支持添加多天的行程安排
- 每个行程可以独立编辑和删除
- 自动编号（第1天、第2天等）
- 删除行程后自动重新编号

### 6. 费用说明管理
- 支持添加"包含"和"不包含"两种类型的费用
- 每种费用可以独立编辑和删除
- 费用说明支持详细描述

### 7. 预订须知管理
- 支持添加多条预订须知
- 每条须知可以独立编辑和删除
- 自动编号（须知1、须知2等）
- 删除须知后自动重新编号

### 8. 价格日历管理
- 支持JSON格式的价格日历数据
- 可以设置不同日期的成人价和儿童价
- 可以设置某日期是否可售
- 格式示例：`{"2024-01-01": {"adultPrice": 1000, "childPrice": 500, "available": true}}`

## 使用方法

### 1. 访问产品编辑页面
1. 打开网页端管理系统
2. 点击"产品管理"
3. 点击"添加产品"或"编辑"按钮

### 2. 填写基本信息
- 填写产品名称、描述、价格等基本信息
- 选择所属区域
- 添加产品标签

### 3. 管理图片
- 在主图管理区域输入多个图片URL（用逗号分隔）
- 在详情图片区域输入详情图片URL

### 4. 设置行程安排
- 点击"添加行程"按钮添加新的行程
- 在文本框中输入具体行程内容
- 可以删除不需要的行程

### 5. 设置费用说明
- 点击"添加包含费用"或"添加不包含费用"按钮
- 在输入框中填写具体的费用说明
- 可以删除不需要的费用项

### 6. 设置预订须知
- 点击"添加须知"按钮添加新的须知
- 在文本框中输入具体的须知内容
- 可以删除不需要的须知

### 7. 设置价格日历
- 在价格日历文本框中输入JSON格式的数据
- 格式：`{"日期": {"adultPrice": 价格, "childPrice": 价格, "available": true/false}}`

### 8. 保存产品
- 点击"保存"按钮保存所有设置
- 系统会自动收集所有表单数据并提交

## 数据结构

产品数据包含以下字段：

```javascript
{
  title: "产品名称",
  description: "产品描述",
  adultPrice: 1000,
  childPrice: 500,
  region: "北疆",
  coverImage: "封面图片URL",
  images: ["主图1", "主图2"],
  detailImages: ["详情图1", "详情图2"],
  tags: ["标签1", "标签2"],
  itinerary: ["第1天行程", "第2天行程"],
  fees: [
    { type: "包含", description: "住宿费用" },
    { type: "不包含", description: "个人消费" }
  ],
  notices: ["须知1", "须知2"],
  priceCalendar: {
    "2024-01-01": { adultPrice: 1000, childPrice: 500, available: true }
  },
  status: "active"
}
```

## 测试功能

可以使用 `test-product-edit.html` 页面来测试产品编辑功能：

1. 启动服务器：`npm start`
2. 访问：`http://localhost:3000/test-product-edit.html`
3. 点击"测试产品编辑"按钮查看功能

## 注意事项

1. 所有必填字段都需要填写
2. 价格日历数据必须是有效的JSON格式
3. 图片URL建议使用HTTPS链接
4. 标签、行程、费用、须知等数组字段会自动收集
5. 删除操作会立即生效，请谨慎操作

## 兼容性

- 新功能与小程序版本完全兼容
- 支持旧版本的数据格式
- 自动处理缺失的字段
- 向后兼容现有的API接口 